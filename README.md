SELECT COALESCE(
    (SELECT MASTER_TEMPLATE 
       FROM IAM_MASTER_TEMPLATE 
      WHERE MASTER_ID = (SELECT MAX(MASTER_ID) 
                           FROM IAM_MASTER_TEMPLATE) 
        AND UPDATED_BY = :userId),
    (SELECT MASTER_TEMPLATE 
       FROM IAM_MASTER_TEMPLATE 
      WHERE FLAG = 'D' 
      FETCH FIRST 1 ROWS ONLY)
) AS MASTER_TEMPLATE
FROM dual;